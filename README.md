# Real-Time Security Dashboard

A local-first MVP cybersecurity/fraud detection application.

## Features

- **CSV Log Upload**: Upload POS transactions, login logs, and other security data
- **Fraud Detection**: Basic rules for detecting suspicious activities
- **Modern UI**: Clean, intuitive dashboard with smooth animations
- **Local-First**: Runs completely locally with SQLite
- **Cloud-Ready**: Designed for easy migration to PostgreSQL + S3

## Architecture

### Frontend
- React with Vite
- Tailwind CSS for styling
- Framer Motion for animations
- React Query for API data fetching

### Backend
- FastAPI
- SQLite (local dev, migrates to PostgreSQL)
- Pandas for data parsing
- scikit-learn for anomaly detection
- JWT authentication with role-based access

## Quick Start

### Backend Setup
```bash
cd backend

# Create virtual environment
python -m venv venv
source venv/bin/activate

# Install dependencies
pip install -r requirements.txt

# Copy environment file
cp env.example .env

# Start the server
uvicorn main:app --reload
```

The backend will be available at `http://localhost:8000`
- API Documentation: `http://localhost:8000/docs`
- Alternative docs: `http://localhost:8000/redoc`

### Frontend Setup
```bash
cd frontend

# Install dependencies
npm install

# Start development server
npm run dev
```

The frontend will be available at `http://localhost:3000`

### Testing the Application

1. **Register a new account** at `http://localhost:3000/register`
2. **Login** with your credentials
3. **Upload a CSV file** using the sample data provided (`sample_data.csv`)
4. **Run fraud analysis** on the uploaded file
5. **View alerts** generated by the fraud detection rules

### Sample Data

Use the provided `sample_data.csv` file to test the fraud detection features. This file contains:
- Duplicate transactions (should trigger duplicate detection)
- High-value transactions (should trigger high-value alerts)
- Off-hours transactions (should trigger off-hours alerts)
- Rapid successive transactions (should trigger rapid transaction alerts)

## Project Structure

```
real-time-security/
├── backend/                 # FastAPI backend
│   ├── app/
│   │   ├── models/         # SQLAlchemy models
│   │   ├── routers/        # API endpoints
│   │   ├── services/       # Business logic
│   │   └── utils/          # Utilities
│   ├── requirements.txt
│   └── main.py
├── frontend/               # React frontend
│   ├── src/
│   │   ├── components/     # React components
│   │   ├── pages/          # Page components
│   │   ├── services/       # API services
│   │   └── utils/          # Utilities
│   ├── package.json
│   └── vite.config.js
└── README.md
```

## Security Features

- JWT-based authentication
- Role-based access control (admin vs normal user)
- Password hashing with bcrypt
- Input validation on all endpoints
- Audit logging for security events
- HTTPS-ready configuration

## Fraud Detection Rules (Current)

The system implements several fraud detection rules:

### 1. Duplicate Transactions
- Detects multiple transactions with the same amount, merchant, and time window
- Flags transactions that occur within the same hour
- **Example**: Multiple $25.50 Starbucks transactions within an hour

### 2. High-Value Transactions
- Identifies transactions above the 95th percentile threshold
- Automatically calculates threshold based on uploaded data
- **Example**: $5,000 luxury store purchase when most transactions are under $200

### 3. Off-Hours Transactions
- Flags transactions outside normal business hours (11 PM - 6 AM)
- Useful for detecting unusual spending patterns
- **Example**: $200 online purchase at 2:30 AM

### 4. Rapid Successive Transactions
- Detects multiple transactions from the same user within 5 minutes
- Indicates potential account takeover or card cloning
- **Example**: 5 transactions from same user within 3 minutes

### 5. Anomaly Detection (Machine Learning)
- Uses Isolation Forest algorithm to detect unusual patterns
- Analyzes amount, time, and merchant patterns
- Identifies transactions that don't fit normal behavior patterns

## API Endpoints

### Authentication
- `POST /auth/register` - Register new user
- `POST /auth/login` - Login user
- `GET /auth/me` - Get current user info

### File Management
- `POST /files/upload` - Upload CSV file
- `GET /files/` - List uploaded files
- `GET /files/{id}` - Get file details
- `DELETE /files/{id}` - Delete file
- `POST /files/{id}/analyze` - Run fraud analysis

### Dashboard
- `GET /dashboard/stats` - Get dashboard statistics
- `GET /dashboard/recent-transactions` - Get recent transactions
- `GET /dashboard/recent-alerts` - Get recent alerts
- `GET /dashboard/suspicious-transactions` - Get suspicious transactions

### Alerts
- `GET /alerts/` - List alerts with filtering
- `GET /alerts/{id}` - Get alert details
- `PATCH /alerts/{id}` - Update alert status
- `POST /alerts/{id}/resolve` - Resolve alert
- `POST /alerts/{id}/false-positive` - Mark as false positive

## CSV File Format

The system expects CSV files with the following columns (all optional):
- `transaction_id` - Unique transaction identifier
- `amount` - Transaction amount (numeric)
- `currency` - Currency code (defaults to USD)
- `timestamp` - Transaction timestamp (ISO format or readable date)
- `merchant` - Merchant name
- `location` - Transaction location
- `payment_method` - Payment method used
- `user_id` - User identifier
- `ip_address` - IP address
- `device_info` - Device information

## Cloud Migration Path

The application is designed for easy migration to cloud infrastructure:

### Database Migration (SQLite → PostgreSQL)
- Change `DATABASE_URL` in environment variables
- All SQLAlchemy models are database-agnostic
- No code changes required

### File Storage Migration (Local → S3)
- Replace local file handling with S3 client
- Update file upload/download endpoints
- Maintain same API interface

### Authentication Migration
- Can integrate with Supabase Auth, Clerk, or Auth0
- JWT token format remains compatible
- Update authentication middleware only

### Deployment Options
- **Backend**: Render, Fly.io, Railway, or AWS/GCP
- **Frontend**: Vercel, Netlify, or AWS S3 + CloudFront
- **Database**: PostgreSQL on any cloud provider
- **File Storage**: AWS S3, Google Cloud Storage, or Azure Blob
